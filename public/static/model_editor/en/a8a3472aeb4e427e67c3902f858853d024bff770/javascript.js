(function(){var a="sproutcore/standard_theme";if(!SC.BUNDLE_INFO){throw"SC.BUNDLE_INFO is not defined!"
}if(SC.BUNDLE_INFO[a]){return}SC.BUNDLE_INFO[a]={requires:["sproutcore/empty_theme"],styles:["/static/sproutcore/standard_theme/en/ae78e682efa8d92ab1f23de86e1e7855014416c6/stylesheet-packed.css","/static/sproutcore/standard_theme/en/ae78e682efa8d92ab1f23de86e1e7855014416c6/stylesheet.css"],scripts:["/static/sproutcore/standard_theme/en/ae78e682efa8d92ab1f23de86e1e7855014416c6/javascript-packed.js"]}
})();ModelEditor=SC.Application.create({NAMESPACE:"ModelEditor",VERSION:"0.1.0",coreStore:SC.Store.create({commitRecordsAutomatically:NO}).from("ModelEditor.ModelDataSource"),store:function(){return this.coreStore
}.property("coreStore").cacheable(),models:function(){return this.get("store").find(ModelEditor.ModelDefinition)
}.property("store","yogoConfig*modelsURL").cacheable(),yogoConfig:SC.Object.create({baseURL:null,projectId:null,modelsURL:function(){if(!this.get("baseURL")||!this.get("projectId")){return""
}return this.get("baseURL")+"/"+this.get("projectId")+"/yogo_models"}.property("baseURL","projectId").cacheable(),fromUrl:"../"}),currentScene:null,modelDetailView:null,dataShouldBeReloaded:function(){this.get("models").refresh();
return YES},changesShouldBeSaved:function(){SC.Logger.info("changesShouldBeSaved");
ModelEditor.get("coreStore").commitRecords();return YES},changesShouldBeDiscarded:function(){SC.Logger.info("changesShouldBeDiscarded");
ModelEditor.get("store").discardChanges();return YES},editingShouldBeFinished:function(){SC.AlertPane.warn("Quit Model Editor?","Any unsaved changes will be lost!",null,"Quit without Saving","Continue Editing",null,null,SC.Object.create({alertPaneDidDismiss:function(b,a){SC.Logger.info(arguments);
if(a===SC.BUTTON1_STATUS){window.location=ModelEditor.yogoConfig.fromUrl}}}))},mainRouteHandler:function(a){SC.Logger.info(arguments);
ModelEditor.makeFirstResponder(ModelEditor.START);ModelEditor.yogoConfig.set("baseURL",a.project_url);
ModelEditor.yogoConfig.set("projectId",a.project_id);ModelEditor.yogoConfig.set("fromUrl",a.from||"../");
ModelEditor.sendAction("dataShouldBeReloaded")}});ModelEditor.modelDefinitionController=SC.ObjectController.create({contentBinding:"ModelEditor.modelDefinitionsController.selection",contentBindingDefault:SC.Binding.single(),_currentModelDidChange:function(){ModelEditor.sendAction("currentModelDidChange")
}.observes("content"),editModelName:function(b){var a=this.get("content");var f=ModelEditor.modelDefinitionsController.indexOf(a);
var c=ModelEditor.mainPage.getPath("mainPane.sideView.modelListView.contentView");
var d=c.itemViewForContentIndex(f);var e=ModelEditor.ModelNameEdit.extend({});SC.PickerPane.create({layout:{width:150,height:40},contentView:e}).popup(d,SC.PICKER_POINTER,[3,0,1,2,3])
},deleteModel:function(){SC.Logger.debug("Deleting model");var a=this.get("content");
SC.Logger.debug(a);SC.Logger.debug("showing alert pane");SC.AlertPane.warn("Delete: "+a.get("name")+"?","This operation will be performed immediately, and cannot be un-done!",null,"Delete Model","Don't Delete",null,this)
},alertPaneDidDismiss:function(c,a){if(a===SC.BUTTON1_STATUS){var b=this.get("content");
SC.Logger.debug("Destroying model: "+b.get("name"));this.set("content",null);b.destroy();
b.commitRecord()}},debugModelDefinition:function(){var a=this.get("content");if(a){SC.AlertPane.info(a.get("name"),"Raw Model Definition",JSON.stringify(a.get("readOnlyAttributes")),"OK")
}}});ModelEditor.modelDefinitionsController=SC.ArrayController.create(SC.CollectionViewDelegate,{contentBinding:"ModelEditor*models",statusDidChange:function(){console.log("models status changed");
ModelEditor.sendAction("modelsDidChange")}.observes("status"),allowsMultipleSelection:NO,orderBy:"name",newModelCount:1,newModelName:"",showCreateModelView:function(b){var a=ModelEditor.CreateModelPane.create({layout:{width:400,height:75,centerX:0,centerY:0},});
a.append()},createModel:function(c){var b=this.get("newModelName");this.set("newModelName","");
if(b.length===0){return}try{var f=ModelEditor.get("store").createRecord(ModelEditor.ModelDefinition,{guid:b.classify(),properties:[]});
f.commitRecord();var a=c.get("pane");a&&a.remove()}catch(d){alert("Duplication model name: "+b)
}},cancelCreateModel:function(b){var a=b.get("pane");a&&a.remove();this.set("newModelName","")
},collectionViewDeleteContent:function(b,c,a){ModelEditor.modelDefinitionController.deleteModel()
}});ModelEditor.modelPropertiesController=SC.ArrayController.create(SC.CollectionViewDelegate,{modelDefinitionBinding:"ModelEditor.modelDefinitionController.content",contentBinding:"*modelDefinition.properties",rawProperties:"*content.editableChildren",replace:function(c,b,a){rawObjects=a.map(function(d){if(d.get&&d.get("isChildRecord")){d=d.get("attributes")
}return d});arguments.callee.base.apply(this,[c,b,rawObjects]);return this},addProperty:function(b,a){SC.Logger.debug("adding Property!");
var c=(a.type||"Text");this.addObject({type:c,name:"New "+c+" Property"})},deleteProperty:function(a){var b=this.get("selection");
if(b){b.forEach(function(c){this.removeObject(c)},this)}},editProperty:function(b){var g=this.get("selection").firstObject();
SC.Logger.debug("Editing property");SC.Logger.debug(g);var f=this.indexOf(g);SC.Logger.debug(f);
var a=ModelEditor.mainPage.getPath("mainPane.centerView.propertyListView.contentView");
SC.Logger.debug(a);var c=a.itemViewForContentIndex(f);SC.Logger.debug(c.get("layer"));
var e=ModelEditor.PropertyEditView.extend({});var d=SC.PickerPane.create({layout:{width:200,height:100},contentView:e});
d.popup(c,SC.PICKER_POINTER,[3,0,1,2,3])},collectionViewComputeDragOperations:function(a,b,d){SC.Logger.debug("Property List is computing drag op.");
if(b.hasDataType(ModelEditor.PropertyType)){var c=b.get("source");SC.Logger.debug("Properties List decided this is a DRAG_COPY.");
return SC.DRAG_COPY}return SC.DRAG_MOVE},collectionViewPerformDragOperation:function(h,c,d,j,i){var b=c.dataForType(ModelEditor.PropertyType),g=h.get("content"),e=h.get("length"),a=c.get("source"),f=SC.DRAG_NONE;
SC.Logger.debug("Property List is recieving a drop!");SC.Logger.debug(b);SC.Logger.debug(a.get("dragContent"));
SC.Logger.debug(arguments);if(!b){return f}if(i&SC.DROP_AFTER){j++}if(j>e){j=e}g.replace(j,0,b);
h.select(SC.IndexSet.create(j,1));h.becomeFirstResponder();return f}});sc_require("controllers/model_properties");
ModelEditor.propertyController=SC.ObjectController.create({contentBinding:"ModelEditor.modelPropertiesController.selection",contentBindingDefault:SC.Binding.single(),editProperty:function(a){var b=ModelEditor.PropertyEditView.extend({});
SC.PickerPane.create({layout:{width:350,height:200},contentView:ModelEditor.PropertyEditView.extend({}),}).popup(a,SC.PICKER_POINTER,[3,0,1,2,3])
},});ModelEditor.propertyPaletteController=SC.ArrayController.create(SC.CollectionViewDelegate,{contentBinding:SC.Binding.transform(function(a){return a.toArray()
}).from("ModelEditor.BasicPropertyConfig.propertySet"),isEditable:NO,allowsMultipleSelection:NO,orderBy:"type",collectionViewDragDataTypes:function(a){SC.Logger.debug("PropertyPalette is returning it's drag data types.");
return[ModelEditor.PropertyType]},collectionViewDragDataForType:function(a,e,b){SC.Logger.debug("PropertyPalette is returning data for a datatype.");
SC.Logger.debug(e);var c=null;var d=null;if(b===ModelEditor.PropertyType){SC.Logger.debug("We are returning data for a PropertyType");
d=a.get("selection");c=[];if(d){d.forEach(function(f){c.push({type:f.type,name:"New Property",options:f.options})
},this)}}SC.Logger.debug("PropertyPalette is returning: ");SC.Logger.debug(c);return c
}});ModelEditor.ModelDefinition=SC.Record.extend({primaryKey:"guid",properties:SC.Record.toMany("ModelEditor.ModelProperty",{nested:YES}),name:function(){var a=this.get("id");
return a.humanize().titleize()}.property("id").cacheable(),icon:function(){var a="/static/model_editor/en/a8a3472aeb4e427e67c3902f858853d024bff770/resources/icons/icon-bullet_red-16.png",e="/static/model_editor/en/a8a3472aeb4e427e67c3902f858853d024bff770/resources/icons/icon-bullet_green-16.png",c="/static/model_editor/en/a8a3472aeb4e427e67c3902f858853d024bff770/resources/icons/icon-bullet_orange-16.png",d="/static/model_editor/en/a8a3472aeb4e427e67c3902f858853d024bff770/resources/icons/icon-bullet_error-16.png";
var b=this.get("status");if(b&SC.Record.READY){if(b===SC.Record.READY_NEW){return a
}if(b===SC.Record.READY_DIRTY){return a}if(b===SC.Record.READY_CLEAN){return e}}if((b&SC.Record.BUSY)){return c
}if((b&SC.Record.ERROR)){return d}return d}.property("status").cacheable(),propertyCount:function(){return this.getPath("properties.length")
}.property("properties").cacheable()});sc_require("models/model_definition");ModelEditor.ModelDataSource=SC.DataSource.extend({fetch:function(a,d){var c=ModelEditor.getPath("yogoConfig.modelsURL");
if(!c){return NO}var e=d.get("recordType");if(e===ModelEditor.ModelDefinition){var b=SC.Request.getUrl(c).notify(this,"didFetchModels",a,d);
b.header("Accept","application/json");b.json();b.send();return YES}return NO},didFetchModels:function(b,a,c){if(SC.ok(b)){a.loadRecords(ModelEditor.ModelDefinition,b.get("body").models);
a.dataSourceDidFetchQuery(c)}else{a.dataSourceDidErrorQuery(c,b)}},retrieveRecord:function(a,d){var e=ModelEditor.getPath("yogoConfig.modelsURL");
if(!e){return NO}if(SC.kindOf(a.recordTypeFor(d),ModelEditor.ModelDefinition)){var f=a.idFor(d);
var b=e+"/"+f;var c=SC.Request.getUrl(url);c.header("Accept","application/json");
c.json();c.notify(this,"didRetrieveModel",a,d);c.send();return YES}return NO},didRetrieveModel:function(b,a,d){if(SC.ok(b)){var c=b.get("body").Model;
a.dataSourceDidComplete(d,c)}else{a.dataSourceDidError(d,b)}},createRecord:function(a,c){var d=ModelEditor.getPath("yogoConfig.modelsURL");
if(!d){return NO}if(SC.kindOf(a.recordTypeFor(c),ModelEditor.ModelDefinition)){var b=SC.Request.postUrl(d);
b.header("Content-Type","application/json");b.header("Accept","application/json");
b.json();b.notify(this,"didCreateModel",a,c);console.debug("createRecord: sending");
b.send({Model:a.readDataHash(c)});return YES}return NO},didCreateModel:function(b,a,d){console.debug("didCreateModel");
if(SC.ok(b)){var c=b.get("body").Model;a.dataSourceDidComplete(d,c)}else{a.dataSourceDidError(d,b)
}},updateRecord:function(a,d){var e=ModelEditor.getPath("yogoConfig.modelsURL");if(!e){return NO
}if(SC.kindOf(a.recordTypeFor(d),ModelEditor.ModelDefinition)){var f=a.idFor(d);var b=e+"/"+f;
var c=SC.Request.putUrl(b);c.json();c.header("Content-Type","application/json");c.header("Accept","application/json");
c.notify(this,"didUpdateModel",a,d);c.send({Model:a.readDataHash(d)});return YES}return NO
},didUpdateModel:function(b,a,c){if(SC.ok(b)){var d=b.get("body");d=d&&d.Model;a.dataSourceDidComplete(c,d)
}else{a.dataSourceDidError(c)}},destroyRecord:function(a,d){var e=ModelEditor.getPath("yogoConfig.modelsURL");
if(!e){return NO}if(SC.kindOf(a.recordTypeFor(d),ModelEditor.ModelDefinition)){var f=a.idFor(d);
var b=e+"/"+f;var c=SC.Request.deleteUrl(b);c.json();c.header("Content-Type","application/json");
c.header("Accept","application/json");c.notify(this,"didDestroyModel",a,d);c.send();
return YES}return NO},didDestroyModel:function(b,a,c){if(SC.ok(b)){a.dataSourceDidDestroy(c)
}else{a.dataSourceDidError(b)}}});sc_require("models/model_definition");ModelEditor.ModelDefinition.FIXTURES=[{guid:"CercalCell",properties:[{type:"Text",name:"Cell Name"},{type:"Text",name:"Hair Length"}]}];
ModelEditor.PropertyType=SC.Object.extend({type:"Text",icon:"/static/model_editor/en/a8a3472aeb4e427e67c3902f858853d024bff770/resources/icons/icon-text-16.png",options:{},action:"addProperty"});
ModelEditor.BasicPropertyConfig=SC.Object.create({Text:ModelEditor.PropertyType.create({type:"Text",icon:"/static/model_editor/en/a8a3472aeb4e427e67c3902f858853d024bff770/resources/icons/icon-text-16.png",options:{}}),Decimal:ModelEditor.PropertyType.create({type:"Decimal",icon:"/static/model_editor/en/a8a3472aeb4e427e67c3902f858853d024bff770/resources/icons/icon-number-16.png",options:{}}),Integer:ModelEditor.PropertyType.create({type:"Integer",icon:"/static/model_editor/en/a8a3472aeb4e427e67c3902f858853d024bff770/resources/icons/icon-number-16.png",options:{}}),TrueFalse:ModelEditor.PropertyType.create({type:"TrueFalse",icon:"/static/model_editor/en/a8a3472aeb4e427e67c3902f858853d024bff770/resources/icons/icon-true_false-16.png",options:{}}),Date:ModelEditor.PropertyType.create({type:"Date",icon:"/static/model_editor/en/a8a3472aeb4e427e67c3902f858853d024bff770/resources/icons/icon-date-16.png",options:{}}),Time:ModelEditor.PropertyType.create({type:"Time",icon:"/static/model_editor/en/a8a3472aeb4e427e67c3902f858853d024bff770/resources/icons/icon-time-16.png",options:{}}),DateTime:ModelEditor.PropertyType.create({type:"DateTime",icon:"/static/model_editor/en/a8a3472aeb4e427e67c3902f858853d024bff770/resources/icons/icon-date_time-16.png",options:{}}),File:ModelEditor.PropertyType.create({type:"File",icon:"/static/model_editor/en/a8a3472aeb4e427e67c3902f858853d024bff770/resources/icons/icon-file-16.png",options:{}}),Image:ModelEditor.PropertyType.create({type:"Image",icon:"/static/model_editor/en/a8a3472aeb4e427e67c3902f858853d024bff770/resources/icons/icon-image-16.png",options:{}}),RecordLink:ModelEditor.PropertyType.create({type:"RecordLink",icon:"/static/model_editor/en/a8a3472aeb4e427e67c3902f858853d024bff770/resources/icons/icon-record_link-16.png",options:{targetRecord:"",multiple:false}}),propertyList:function(){return[this.Text,this.Integer,this.Decimal,this.TrueFalse,this.Date,this.Time,this.DateTime,this.Image,this.File,this.RecordLink]
}.property("Text","Integer","Decimal","TrueFalse","Date","Time","DateTime","Image","File","RecordLink").cacheable(),propertySet:function(){return SC.Set.create(this.get("propertyList"))
}.property("propertyList").cacheable(),propertyNameList:function(){return this.get("propertyList").getEach("type")
}.property("propertyList").cacheable()});ModelEditor.ModelPropertyOptions=SC.ChildRecord.extend({targetRecord:SC.Record.attr(String),multipleRecords:SC.Record.attr(Boolean)});
ModelEditor.ModelProperty=SC.ChildRecord.extend({primaryKey:"guid",name:SC.Record.attr(String,{isRequired:YES}),options:SC.ChildRecord.toOne("ModelEditor.ModelPropertyOptions",{nested:true}),propType:function(b,c){if(c!==undefined){this.beginEditing();
var a=this.get("attributes");a.type=c;this.endEditing();return this}else{var a=this.get("readOnlyAttributes");
return a.type}}.property(),displayName:function(){return this.get("name")+" ("+this.get("propType")+")"
}.property("name","propType").cacheable(),displayIcon:function(){var a=this.get("propType");
return ModelEditor.BasicPropertyConfig.getPath(a+".icon")||"sc-icon-bookmark-16"}.property("propType").cacheable()});
sc_require("models/model_property");ModelEditor.ModelProperty.FIXTURES=[];ModelEditor.MODELS=SC.Responder.create({nextResponder:null,didBecomeFirstResponder:function(){},willLoseFirstResponder:function(){},addModel:function(b){var a=ModelEditor.CreateModelPane.create({layout:{width:400,height:75,centerX:0,centerY:0},});
a.append();return YES},removeModel:function(a){SC.Logger.info("removeModel");ModelEditor.modelDefinitionController.deleteModel();
return YES},modelsDidChange:function(){if(status&SC.Record.ERROR){ModelEditor.makeFirstResponder(ModelEditor.ERROR);
return YES}return NO},showPropertyPalette:function(b,a){SC.PickerPane.create({layout:{width:200,height:300},contentView:ModelEditor.PropertyPalette,}).popup(b);
return YES},addPropertyMenu:function(b,a){var c=SC.MenuPane.create({layout:{width:150,height:300},items:ModelEditor.BasicPropertyConfig.get("propertyList"),itemIconKey:"icon",itemValueKey:"type",itemTitleKey:"type",itemActionKey:"action"});
c.popup(b,SC.PICKER_POINTER);c.becomeFirstResponder();return YES},addProperty:function(a){ModelEditor.modelPropertiesController.addProperty(a,a.getPath("content"));
return YES},removeProperty:function(a){ModelEditor.modelPropertiesController.deleteProperty();
return YES},});sc_require("states/models.js");ModelEditor.EDIT=SC.Responder.create({nextResponder:ModelEditor.MODELS,didBecomeFirstResponder:function(){SC.Logger.info("-> EDIT");
ModelEditor.set("currentScene","ModelEditor.modelBrowser.mainView");ModelEditor.set("modelDetailView","ModelEditor.propertyBrowser.mainView");
ModelEditor.getPath("mainPage.mainPane").becomeFirstResponder()},willLoseFirstResponder:function(){SC.Logger.info("EDIT ->");
ModelEditor.set("currentScene",null);ModelEditor.set("modelDetailView",null)},currentModelDidChange:function(){SC.Logger.info("EDIT: currentModelDidChange");
if(!ModelEditor.getPath("modelDefinitionController.content")){ModelEditor.makeFirstResponder(ModelEditor.READY);
return YES}else{return YES}}});ModelEditor.ERROR=SC.Responder.create({nextResponder:null,didBecomeFirstResponder:function(){SC.Logger.info("-> ERROR");
ModelEditor.set("currentScene","errorLoading")},willLoseFirstResponder:function(){ModelEditor.set("currentScene",null)
},});sc_require("states/models.js");ModelEditor.READY=SC.Responder.create({nextResponder:ModelEditor.MODELS,didBecomeFirstResponder:function(){SC.Logger.info("-> READY");
ModelEditor.set("currentScene","ModelEditor.modelBrowser.mainView");ModelEditor.set("modelDetailView","ModelEditor.modelBrowser.browserWelcomeView");
ModelEditor.getPath("mainPage.mainPane").becomeFirstResponder()},willLoseFirstResponder:function(){SC.Logger.info("READY ->");
ModelEditor.set("currentScene",null);ModelEditor.set("modelDetailView",null)},currentModelDidChange:function(){SC.Logger.info("READY: currentModelDidChange");
if(ModelEditor.getPath("modelDefinitionController.content")){ModelEditor.makeFirstResponder(ModelEditor.EDIT);
return YES}else{ModelEditor.makeFirstResponder(this);return YES}}});ModelEditor.START=SC.Responder.create({nextResponder:null,didBecomeFirstResponder:function(){SC.Logger.info("-> START");
ModelEditor.set("currentScene","modelsLoading")},willLoseFirstResponder:function(){SC.Logger.info("START ->");
ModelEditor.set("currentScene",null)},modelsDidChange:function(){var a=ModelEditor.getPath("models.status");
if(a&SC.Record.READY){ModelEditor.makeFirstResponder(ModelEditor.READY);return YES
}else{if(a&SC.Record.ERROR){ModelEditor.makeFirstResponder(ModelEditor.ERROR);return YES
}}return NO}});ModelEditor.CreateModelPane=SC.PanelPane.extend({contentView:SC.View.extend({childViews:"modelNameLabel modelNameField cancelButton createButton".w(),modelNameLabel:SC.LabelView.extend({layout:{left:10,top:10,width:90,height:20},value:"Model Name",}),modelNameField:SC.TextFieldView.extend({layout:{left:105,top:10,right:10,height:20},valueBinding:"ModelEditor.modelDefinitionsController.newModelName",nextKeyView:function(){return this.getPath("parentView.cancelButton")
}.property()}),createButton:SC.ButtonView.extend({layout:{right:10,top:40,width:100},title:"Create Model",isEnabledBinding:SC.Binding.from("ModelEditor.modelDefinitionsController.newModelName").bool(),target:"ModelEditor.modelDefinitionsController",action:"createModel",isDefault:YES,nextKeyView:function(){return this.getPath("parentView.cancelButton")
}.property()}),cancelButton:SC.ButtonView.extend({layout:{right:120,top:40,width:75},title:"Cancel",target:"ModelEditor.modelDefinitionsController",action:"cancelCreateModel",isCancel:YES,nextKeyView:function(){return this.getPath("parentView.modelNameField")
}.property()})})});ModelEditor.ModelNameEdit=SC.View.extend({childViews:"modelNameField".w(),modelNameField:SC.TextFieldView.extend({layout:{top:10,left:10,right:10,bottom:10},valueBinding:"ModelEditor.modelDefinitionController.name"})});
ModelEditor.PatchedLabelView=SC.LabelView.extend({inlineEditorShouldBeginEditing:function(){return YES
}});ModelEditor.PatchedListItemView=SC.ListItemView.extend({inlineEditorShouldBeginEditing:function(){return YES
}});ModelEditor.PropertyEditView=SC.View.extend({childViews:"propertyNameField propertyTypeField".w(),acceptsFirstResponder:YES,isEnabledBinding:"ModelEditor.propertyController.content",isEnabledBindingDefault:SC.Binding.bool(),propertyNameField:SC.TextFieldView.extend({layout:{top:10,left:15,right:15,height:25},valueBinding:"ModelEditor.propertyController.name",isEnabledBinding:".parentView.isEnabled"}),propertyTypeField:SC.SelectButtonView.extend({layout:{top:40,left:15,right:15},theme:"capsule",valueBinding:"ModelEditor.propertyController.propType",objectsBinding:"ModelEditor.BasicPropertyConfig*propertyList",isEnabledBinding:".parentView.isEnabled",iconKey:"icon",nameKey:"type",valueKey:"type",checkboxEnabled:YES})});
ModelEditor.PropertyListItemView=SC.ListItemView.extend({renderAction:function(a,b){a.push("<span>Action</span")
}});ModelEditor.PropertyPalette=SC.ScrollView.extend({contentView:SC.SourceListView.extend({contentBinding:"ModelEditor.propertyPaletteController.arrangedObjects",contentValueKey:"type",hasContentIcon:YES,contentIconKey:"icon",selectOnMouseDown:YES,isEnabledBinding:SC.Binding.from("ModelEditor.modelDefinitionsController.selection").notEmpty()})});
ModelEditor.mainPage=SC.Page.design({mainPane:SC.MainPane.design({defaultResponder:ModelEditor,childViews:"mainView".w(),mainView:SC.ContainerView.design({nowShowingBinding:"ModelEditor.currentScene",acceptsFirstResponder:YES,}),}),modelsLoading:SC.View.design({childViews:"labelView progressView".w(),labelView:SC.LabelView.design({layout:{centerX:0,centerY:0,height:24,width:200},textAlign:SC.ALIGN_CENTER,controlSize:SC.HUGE_CONTROL_SIZE,controlSize:SC.LARGE_CONTROL_SIZE,fontWeight:SC.BOLD_WEIGHT,value:"Loading...".loc()}),progressView:SC.ProgressView.design({layout:{centerX:0,centerY:30,width:200,height:20},isIndeterminate:YES,isRunning:YES})}),errorLoading:SC.View.design({childViews:"labelView".w(),labelView:SC.LabelView.design({layout:{centerX:0,centerY:0,height:100,width:300},textAlign:SC.ALIGN_CENTER,controlSize:SC.HUGE_CONTROL_SIZE,controlSize:SC.LARGE_CONTROL_SIZE,fontWeight:SC.BOLD_WEIGHT,value:"Could not load Models!"})})});
ModelEditor.modelBrowser=SC.Page.design({mainView:SC.View.design({childViews:"topBar splitBrowser".w(),topBar:SC.ToolbarView.design({childViews:"finishEditingButton saveButton".w(),layout:{top:0,left:0,right:0,height:40},anchorLocation:SC.ANCHOR_TOP,finishEditingButton:SC.ButtonView.design({layout:{right:10,width:140,centerY:0,height:25},icon:"/static/model_editor/en/a8a3472aeb4e427e67c3902f858853d024bff770/resources/icons/icon-folder_go-16.png",title:"Quit Editing",titleMinWidth:15,action:"editingShouldBeFinished",keyEquivalent:"ctrl_q"}),saveButton:SC.ButtonView.design({layout:{left:10,width:140,centerY:0,height:25},icon:"/static/model_editor/en/a8a3472aeb4e427e67c3902f858853d024bff770/resources/icons/icon-database_save-16.png",title:"Save Changes",titleMinWidth:15,action:"changesShouldBeSaved",keyEquivalent:"ctrl_s",isDefault:YES,isEnabledBinding:"ModelEditor*store.hasChanges",isEnabledBindingDefault:SC.Binding.notEmpty()}),}),splitBrowser:SC.SplitView.design({layout:{top:40},defaultThickness:150,dividerThickness:1,canCollapseViews:NO,acceptsFirstResponder:YES,topLeftView:SC.View.design({childViews:"modelListView bottomBar".w(),layout:{minWidth:100},modelListView:SC.ScrollView.design({hasHorizontalScroller:NO,contentView:SC.SourceListView.design({layout:{bottom:25},exampleView:ModelEditor.PatchedListItemView,rowHeight:25,contentBinding:"ModelEditor.modelDefinitionsController.arrangedObjects",selectionBinding:"ModelEditor.modelDefinitionsController.selection",contentValueKey:"name",canEditContent:NO,canDeleteContent:YES,hasContentIcon:YES,contentIconKey:"icon",contentUnreadCountKey:"propertyCount",acceptsFirstResponder:YES})}),bottomBar:SC.ToolbarView.design({layout:{height:25},anchorLocation:SC.ANCHOR_BOTTOM,childViews:"addButton removeButton resizeThumb".w(),addButton:SC.ButtonView.design({layout:{left:0,top:0,bottom:0,width:25},classNames:"toolbar-button-small".w(),titleMinWidth:0,controlSize:SC.SMALL_CONTROL_SIZE,title:"+",action:"addModel",keyEquivalent:"ctrl_n"}),removeButton:SC.ButtonView.design({layout:{left:25,top:0,bottom:0,width:25},classNames:"toolbar-button-small".w(),titleMinWidth:0,controlSize:SC.SMALL_CONTROL_SIZE,title:"-",isEnabledBinding:SC.Binding.bool("ModelEditor.modelDefinitionController.content"),action:"removeModel",}),resizeThumb:SC.ThumbView.design({layout:{right:0,width:25,centerY:0,height:25},classNames:"thumb-view".w()})})}),bottomRightView:SC.ContainerView.design({classNames:"model-detail-area".w(),layout:{minWidth:150},nowShowingBinding:"ModelEditor.modelDetailView"})})}),browserWelcomeView:SC.View.design({childViews:"selectModelText selectModelArrow createModelText createModelArrow".w(),classNames:"browse-welcome-view".w(),backgroundColor:"white",selectModelText:SC.LabelView.design({layout:{width:200,height:50,left:180,top:20},escapeHTML:NO,value:"<h1>Select a Model to get started...</h1>"}),selectModelArrow:SC.View.design({classNames:"select-model-arrow",layout:{left:0,top:10,width:200,height:100}}),createModelText:SC.LabelView.design({layout:{width:200,height:50,left:200,bottom:150},escapeHTML:NO,value:"<h1>...or Create a New Model!</h1>"}),createModelArrow:SC.View.design({classNames:"create-model-arrow",layout:{left:0,bottom:0,width:200,height:175}}),})});
ModelEditor.propertyBrowser=SC.Page.design({mainView:SC.SplitView.design({dividerThickness:1,defaultThickness:200,autoresizeBehavior:SC.RESIZE_TOP_LEFT,canCollapseViews:NO,acceptsFirstResponder:YES,topLeftView:SC.View.design({childViews:"propertyList bottomBar".w(),propertyList:SC.ScrollView.design({layout:{bottom:25},hasHorizontalScroller:NO,contentView:SC.ListView.design({rowHeight:30,exampleView:ModelEditor.PropertyListItemView,contentBinding:"ModelEditor.modelPropertiesController.arrangedObjects",selectionBinding:"ModelEditor.modelPropertiesController.selection",contentValueKey:"name",hasContentIcon:YES,contentIconKey:"displayIcon",canReorderContent:YES,canEditContent:YES,canDeleteContent:YES,isDropTarget:YES,acceptsFirstResponder:YES})}),bottomBar:SC.ToolbarView.design({anchorLocation:SC.ANCHOR_BOTTOM,layout:{height:25},childViews:"addButton removeButton".w(),addButton:SC.ButtonView.design({layout:{left:0,top:0,bottom:0,width:25},classNames:"toolbar-button-small".w(),titleMinWidth:0,controlSize:SC.SMALL_CONTROL_SIZE,title:"+",isEnabledBinding:SC.Binding.bool("ModelEditor.modelDefinitionController.content"),action:"addPropertyMenu",keyEquivalent:"ctrl_p",nextKeyView:SC.outlet("page.mainView.bottomRightView.propertyEditor")}),removeButton:SC.ButtonView.design({layout:{left:25,top:0,bottom:0,width:25},classNames:"toolbar-button-small".w(),titleMinWidth:0,controlSize:SC.SMALL_CONTROL_SIZE,title:"-",isEnabledBinding:SC.Binding.bool("ModelEditor.modelDefinitionController.content"),action:"removeProperty"}),})}),bottomRightView:SC.View.design({childViews:"propertyEditor bottomBar".w(),backgroundColor:"#C5C8D7",propertyEditor:SC.ScrollView.design({layout:{bottom:25},contentViewBinding:"ModelEditor.propertyEditor.mainView"}),bottomBar:SC.ToolbarView.design({layout:{height:25},anchorLocation:SC.ANCHOR_BOTTOM,childViews:"resizeThumb".w(),resizeThumb:SC.ThumbView.design({layout:{left:0,width:25,centerY:0,height:25},classNames:"thumb-view".w()})})})})});
ModelEditor.propertyEditor=SC.Page.design({mainView:SC.View.design({childViews:"titleBar basicEditor optionsBar optionsEditor".w(),titleBar:SC.ToolbarView.design({layout:{height:20},childViews:"titleLabel".w(),titleLabel:SC.LabelView.design({value:"Property"})}),basicEditor:ModelEditor.PropertyEditView.design({layout:{top:20,height:75},}),optionsBar:SC.ToolbarView.design({layout:{top:95,height:20},childViews:"titleLabel".w(),titleLabel:SC.LabelView.design({value:"Options"})}),optionsEditor:SC.View.design({layout:{top:105}})})});
ModelEditor.main=function main(){SC.CAPTURE_BACKSPACE_KEY=YES;ModelEditor.getPath("mainPage.mainPane").append();
SC.routes.add(":project_url/:project_id",ModelEditor,"mainRouteHandler");SC.routes.add(":project_url/:project_id&from=:originalLocation",ModelEditor,"mainRouteHandler");
ModelEditor.makeFirstResponder(ModelEditor.START)};ModelEditor.mainDataLoad=function(b,a){ModelEditor.yogoConfig.set("baseURL",b);
ModelEditor.yogoConfig.set("projectId",a);ModelEditor.makeFirstResponder(ModelEditor.START)
};function main(){ModelEditor.main()};